workflows:  
  ios-workflow:  
    name: iOS Workflow  
    max_build_duration: 120  
    instance_type: mac_mini_m2  
    integrations:  
      app_store_connect: codemagic  
    environment:  
      ios_signing:  
        distribution_type: app_store  
        bundle_identifier: com.ranchero.NetNewsWire.iOS 
      vars:  
        XCODE_WORKSPACE: "NetNewsWire.xcodeproj"  
        XCODE_SCHEME: "NetNewsWire-iOS"  
      xcode: latest  
      cocoapods: default   
    scripts:  
      - name: Set up code signing settings  
        script: |  
          set -ex  
          find . -name "*.xcconfig" -exec ls -la {} \;  
      - name: Build ipa for distribution  
        script: |  
          xcode-project build-ipa \  
            --workspace "$XCODE_WORKSPACE" \  
            --scheme "$XCODE_SCHEME"  
    artifacts:  
      - build/ios/ipa/*.ipa  
      - /tmp/xcodebuild_logs/*.log  
      - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app  
      - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM  
    publishing:  
      email:  
        recipients:  
          - user@example.com  
        notify:  
          success: true  
          failure: false  
      app_store_connect:  
        auth: integration  
        submit_to_testflight: false  
        beta_groups:  
          - group name  
        submit_to_app_store: false  
  
  macos-workflow:  
    name: macOS Workflow  
    max_build_duration: 120  
    instance_type: mac_mini_m1  
    environment:  
      vars:  
        XCODE_WORKSPACE: "NetNewsWire.xcodeproj"  
        XCODE_SCHEME: "NetNewsWire"  
      xcode: latest  
      cocoapods: default  
    scripts:  
      - name: Set up code signing settings  
        script: |  
          set -ex  
          find . -name "*.xcconfig" -exec ls -la {} \;  
      - name: Build macOS app  
        script: |  
          xcode-project build-ipa \  
            --workspace "$XCODE_WORKSPACE" \  
            --scheme "$XCODE_SCHEME"  
    artifacts:  
      - build/macos/Build/Products/**/*.app  
      - /tmp/xcodebuild_logs/*.log  
    publishing:  
      email:  
        recipients:  
          - user@example.com  
        notify:  
          success: true  
          failure: false
